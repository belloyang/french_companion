
@switch (appState()) {
  @case ('splash') {
    <app-splash-screen (animationDone)="onSplashAnimationDone()"></app-splash-screen>
  }
  @case ('landing') {
    <app-landing
      [scenarios]="scenarios"
      [grammarTopics]="grammarTopics"
      [listeningExercises]="listeningExercises"
      [userProgress]="userProgress()"
      [currentLevel]="currentLevel()"
      [nextLevel]="nextLevel()"
      [progressPercentage]="progressPercentage()"
      [currentStreak]="userProgress().currentStreak"
      (startSession)="onStartSession($event)"
      (viewAchievements)="openAchievementsModal()">
    </app-landing>
  }
  @case ('chat') {
    <app-chat 
      [initialState]="initialChatState()!"
      (sessionEnded)="onSessionEnded($event)"
      (xpGained)="onXpGained($event)">
    </app-chat>
  }
}

<!-- Level Up Modal -->
@if (showLevelUp()) {
  <app-level-up 
    [newLevelName]="justLeveledUpTo()!"
    (close)="closeLevelUpModal()">
  </app-level-up>
}

<!-- Achievements Modal -->
@if (showAchievements()) {
  <app-achievements
    [achievements]="achievements"
    [unlockedAchievementIds]="userProgress().unlockedAchievements"
    (close)="closeAchievementsModal()">
  </app-achievements>
}

<!-- Achievement Unlocked Toast -->
@if (showAchievementToast()) {
  <app-achievement-toast
    [achievement]="justUnlockedAchievement()!"
    (close)="closeAchievementToast()">
  </app-achievement-toast>
}
