<div class="fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm" (click)="closeModal()">
  <div class="relative w-full max-w-2xl max-h-[90vh] flex flex-col p-6 mx-4 bg-white rounded-xl shadow-xl dark:bg-slate-800" (click)="$event.stopPropagation()">
    <header class="flex items-center justify-between pb-4 border-b shrink-0 dark:border-slate-700">
      <h2 class="text-xl font-bold text-slate-800 dark:text-white">My Vocabulary Bank</h2>
      <button (click)="closeModal()" class="text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white">
        <i class="text-2xl fa-solid fa-xmark"></i>
      </button>
    </header>
    <main class="flex-1 mt-4 overflow-y-auto pr-2">
      <!-- Due for Review Section -->
      <section>
        <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-200">Due for Review ({{ wordsForReview().length }})</h3>
        @if (!wordsForReview().length) {
          <div class="flex flex-col items-center justify-center p-6 my-4 text-center bg-zinc-50 dark:bg-slate-700/50 rounded-lg">
            <i class="mb-3 text-3xl text-emerald-500 fa-solid fa-check-circle"></i>
            <p class="text-slate-600 dark:text-slate-300">All caught up!</p>
            <p class="mt-1 text-sm text-slate-400 dark:text-slate-500">No words are due for review right now.</p>
          </div>
        } @else {
          <div class="mt-3 space-y-3">
            @for (item of wordsForReview(); track item.word) {
              <div class="p-4 rounded-lg bg-white dark:bg-slate-700/50 shadow-sm border border-transparent dark:border-slate-700">
                <h4 class="text-lg font-bold text-indigo-500 dark:text-indigo-400">{{ item.word }}</h4>
                <div class="mt-2 text-sm">
                  <p><span class="font-semibold text-slate-600 dark:text-slate-300">Translation:</span> {{ item.translation }}</p>
                  <p class="italic text-slate-500 dark:text-slate-400">"{{ item.example }}"</p>
                </div>
                <div class="flex justify-end mt-3">
                  <button (click)="onReview(item)" class="px-4 py-2 text-sm font-semibold text-white bg-emerald-500 rounded-md hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500">
                    <i class="mr-2 fa-solid fa-check"></i>I knew this!
                  </button>
                </div>
              </div>
            }
          </div>
        }
      </section>

      <!-- All Words Section -->
      <section class="mt-8">
        <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-200">All Words ({{ otherWords().length }})</h3>
        @if (!otherWords().length && !wordsForReview().length) {
          <div class="flex flex-col items-center justify-center p-6 my-4 text-center bg-zinc-50 dark:bg-slate-700/50 rounded-lg">
            <i class="mb-4 text-4xl text-slate-400 fa-solid fa-box-open"></i>
            <p class="text-slate-500 dark:text-slate-400">Your vocabulary bank is empty.</p>
            <p class="mt-1 text-sm text-slate-400 dark:text-slate-500">Save new words from your conversations with Ami!</p>
          </div>
        } @else if (!otherWords().length && wordsForReview().length > 0) {
           <div class="p-4 my-4 text-center bg-zinc-50 dark:bg-slate-700/50 rounded-lg">
             <p class="text-slate-500 dark:text-slate-400">All your saved words are currently up for review.</p>
          </div>
        } @else {
          <div class="mt-3 space-y-3">
            @for (item of otherWords(); track item.word) {
              <div class="p-4 border rounded-lg dark:border-slate-700 bg-zinc-50 dark:bg-slate-700/50">
                <div class="flex items-start justify-between">
                    <div>
                        <h4 class="font-bold text-indigo-500 dark:text-indigo-400">{{ item.word }}</h4>
                        <p class="text-sm text-slate-600 dark:text-slate-300">{{ item.translation }}</p>
                    </div>
                    <span class="px-2 py-1 text-xs font-medium rounded-full bg-zinc-200 text-slate-600 dark:bg-slate-600 dark:text-slate-200">
                        {{ getDaysUntilReview(item.nextReviewDate) }}
                    </span>
                </div>
                <p class="mt-2 text-sm italic text-slate-500 dark:text-slate-400">"{{ item.example }}"</p>
              </div>
            }
          </div>
        }
      </section>
    </main>
  </div>
</div>